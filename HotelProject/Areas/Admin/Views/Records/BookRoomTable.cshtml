@model IEnumerable<HotelData.Entities.Record>

@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>BookTable</title>
    <style>
        .content1 {
            width: 14.3%;
            position: relative;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: gold;
            display: block;
            padding-top: 100px;
            padding-left: 85%;
        }

        td:after {
            content: '';
            display: block;
            /*margin-top: 100%;*/
        }

        .content1:hover {
            background-color: red;
        }
    </style>
    <script>
    var k = new Date(new Date().getYear(), new Date().getMonth(), 1);
    var startDay = k.getDay();
    var empDays = 0;

    var tr = document.createElement('tr');
    tr.id = 'tr';
    document.getElementById('table').appendChild(tr);

    while (empDays <= startDay)
    {
        var td = document.createElement('td');
        td.id = 'td';
        document.getElementById('table').appendChild(td);
        //td.innerHTML = new Date(new Date().getYear(), new Date().getMonth()+1, 0).getDate();
        empDays++;

    }

    for (var i = 1; i <= new Date(new Date().getYear(), new Date().getMonth()+1, 0).getDate() ; i++)
    {
        if (empDays >= 7) {
            var tr = document.createElement('tr');
            document.getElementById('table').appendChild(tr);
            tr.id = 'tr';
            empDays = 0;
        }


        var td = document.createElement('td');
        //td.id = "td"+i;
        var cont = document.createElement('div');
        cont.className = "content1";
        cont.id = "cont" + i;

        //cont.addEventListener(onclick, DateClick);
        document.getElementById('table').appendChild(td);
        td.appendChild(cont);
        document.getElementById("cont" + i).addEventListener("click", DateClick);
        //cont.onclick = DateClick(cont.id);
        cont.innerHTML = i;

        empDays++;




    }
    var startDate = 0;
    var finishDate = 32;
    var dateState = true;

    document.getElementById("cont1").addEventListener("click", DateClick);

    function DateColor(start, finish) {
        //var el = document.getElementById("cont1");
        //el.style.backgroundColor = "lightblue";
        for (var i = 1; i < 31; i++) {
            if (i >= start && i <= finish) {
                var el = document.getElementById("cont" + i.toString());
                el.style.backgroundColor = "lightblue";
            }
            else {
                var el = document.getElementById("cont" + i.toString());
                el.style.backgroundColor = "gold";
            }
        }
    }

    function DateClick() {
        var el = document.getElementById(this.id);

        if (dateState==true) {
            //document.getElementById("startDate").innerHTML = el.innerHTML;
            document.getElementById("finishDate").innerHTML = "";
            document.getElementById("startDate").innerHTML = "";
            startDate = el.innerHTML;
            dateState = false;
            finishDate = 0;
            DateDefColor();
            el.style.backgroundColor = "lightblue";
        }
        else
        {
            dateState = true;

            if (parseInt(el.innerHTML) >= startDate) {
                finishDate = el.innerHTML;
                document.getElementById("finishDate").innerHTML = finishDate;
                document.getElementById("startDate").innerHTML = startDate;

            }


            if(parseInt(el.innerHTML)<startDate)
            {
                finishDate = startDate;
                startDate = el.innerHTML;
                document.getElementById("startDate").innerHTML = startDate;
                document.getElementById("finishDate").innerHTML = finishDate;


            }

            DateColor(startDate, finishDate);
        }
        return;
    }



    function DateDefColor() {
        for (var i = 1; i < 31; i++) {
            var el = document.getElementById("cont" + i);
            el.style.backgroundColor = "gold";
        }
    }

    function DateRecordColor(startDate, finishDate) {
        alert("23");
        for (var i = startDate; i <= finishDate; i++) {

            var el = document.getElementById("cont"+i.toString());
            el.style.backgroundColor = "lightblue";

        }
        return;
    }

    </script>
</head>
<body>
    <label>С:</label>
    <label id="startDate"></label>
    <label>До:</label>
    <label id="finishDate"></label>
    <div>
        <table class="table" id="table">
            <tr>
                <th>
                    ПН
                </th>
                <th>
                    ВТ
                </th>
                <th>
                    СР
                </th>
                <th>
                    ЧТ
                </th>
                <th>
                    ПТ
                </th>
                <th>
                    СБ
                </th>
                <th>
                    ВС
                </th>
            </tr>


        </table>
    </div>

    @{ 
        foreach (var item in Model)
        {
          <script>
              alert("33");
              DateRecordColor(@item.DateIn.Day,@item.DateOut.Day);
              </script>
           @*@Html.Raw("< script >DateRecordColor("+@item.DateIn+","+ @item.DateOut+");</ script >")*@
        }

    }
</body>
</html>


